var TextAnnotator;(()=>{var t={590:(t,n,e)=>{t.exports=e(137).default},137:(t,n)=>{"use strict";n.default=class{constructor(t){this.html="",this.text="",this.tags=[],this.annotations=[],this.html=t;const{text:n,tags:e}=this._stripHTMLTags(t);this.text=n,this.tags=e}search(t,{prefix:n="",postfix:e="",trim:s=!0,caseSensitive:i=!1,offset:a=0}={}){const{text:l,annotations:o}=this;let h=n+t+e;h=s?h.trim():h,h=i?h:h.toLowerCase();const r=(i?l:l.toLowerCase()).indexOf(h,a),g=s?n.replace(/^\s+/,"").length:n.length,c=s?e.replace(/\s+$/,"").length:e.length;return-1===r?-1:o.push({index:r+g,length:h.substring(g,h.length-c).length})-1}searchAll(t,n){let e=0;const s=[];let i=-1;const a=Object.assign({},n);do{i=this.search(t,a),-1!==i&&(e=this.annotations[i].index+1,a.offset=e,s.push(i))}while(-1!==i);return s}annotate(t,{tagName:n="span",baseClassName:e="annotation",classPattern:s="annotation-"}={}){const{tags:i,annotations:a,_insert:l,_binaryInsert:o}=this,h=a[t],r=[h.index,h.index+h.length,0],g=[[...r]];for(let t=0;t<i.length;t++){const{index:n,length:e}=i[t];if(n<=r[0])g[0][2]+=e;else{if(!(n<r[1]))break;{const s=0===t?0:i[t-1].index,a=g[g.length-1];if(n===s)a[2]+=e;else{const t=a[1];a[1]=n,g.push([a[1],t,a[2]+e])}}}}const c=`<${n} class="${e} ${s}${t}">`,x=`</${n}>`,d=c.length,f=x.length;let u=0;for(let n=0;n<g.length;n++){const e=g[n];o(i,{index:e[0],length:d,isCloseTag:!1,annotationIndex:t},((t,n)=>t.index<=n.index?-1:1)),o(i,{index:e[1],length:f,isCloseTag:!0,annotationIndex:t},((t,n)=>t.index-n.index)),this.html=l(this.html,c,e[0]+e[2]+u),this.html=l(this.html,x,e[1]+e[2]+u+d),u+=d+f}return this.html}annotateAll(t,n){return t.forEach((t=>{this.annotate(t,n)})),this.html}unannotate(t){const n=[],e=this.tags.filter(((e,s)=>(e.annotationIndex===t&&n.push(s),e.annotationIndex===t))),s=this.tags.filter((n=>n.annotationIndex!==t));for(let t=0;t<e.length;t++){const i=e[t];let a=0;for(let t=0;t<s.length;t++){const n=s[t];if(i.index<n.index)break;i.index>n.index?a+=n.length:void 0===n.annotationIndex?i.isCloseTag||(a+=n.length):i.annotationIndex<n.annotationIndex?n.isCloseTag&&(a+=n.length):i.isCloseTag||(a+=n.length)}this.html=this.html.slice(0,i.index+a)+this.html.slice(i.index+a+i.length),this.tags.splice(n[t]-t,1)}return this.html}unannotateAll(t){return t.forEach((t=>{this.unannotate(t)})),this.html}_stripHTMLTags(t){let n=t;const e=[];let s;const i=/<[^>]+>/;for(;s=n.match(i);)n=n.replace(s,""),e.push({index:s.index,length:s[0].length,isCloseTag:s[0].startsWith("</")});return{text:n,tags:e}}_insert(t,n,e){return t.slice(0,e)+n+t.slice(e)}_binaryInsert(t,n,e){if(0===t.length||e(t[0],n)>=0)return t.splice(0,0,n),t;if(t.length>0&&e(t[t.length-1],n)<=0)return t.splice(t.length,0,n),t;let s=0,i=t.length,a=0,l=i;for(;s<i;){const o=Math.floor((i+s)/2),h=e(t[o],n);if(h<0?s=o:h>0?i=o:(i=o,s=o),a===s&&l===i)break;a=s,l=i}return t.splice(i,0,n),t}}}},n={},e=function e(s){var i=n[s];if(void 0!==i)return i.exports;var a=n[s]={exports:{}};return t[s](a,a.exports,e),a.exports}(590);TextAnnotator=e})();