var TextAnnotator=function(t){var e={};function n(s){if(e[s])return e[s].exports;var i=e[s]={i:s,l:!1,exports:{}};return t[s].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(s,i,function(e){return t[e]}.bind(null,i));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){t.exports=n(1).default},function(t,e,n){"use strict";n.r(e);e.default=class{constructor(t){this.html=t;const{text:e,tags:n}=this._stripHTMLTags(t);this.text=e,this.tags=n,this.annotations=[]}search(t,{prefix:e="",postfix:n="",trim:s=!0,caseSensitive:i=!1,offset:o=0}={}){const{text:r,annotations:l}=this;let a=e+t+n;a=s?a.trim():a,a=i?a:a.toLowerCase();const h=(i?r:r.toLowerCase()).indexOf(a,o),c=s?e.replace(/^\s+/,"").length:e.length,u=s?n.replace(/\s+$/,"").length:n.length;return-1===h?-1:l.push({index:h+c,length:a.substring(c,a.length-u).length})-1}searchAll(t,e){let n=0;const s=[];let i=-1;const o=Object.assign({},e);do{i=this.search(t,o),-1!==i&&(n=this.annotations[i].index+1,o.offset=n,s.push(i))}while(-1!==i);return s}annotate(t,{tagName:e="span",baseClassName:n="annotation",classPattern:s="annotation-"}={}){const{tags:i,annotations:o,_insert:r,_binaryInsert:l}=this,a=o[t],h=[a.index,a.index+a.length,0],c=[[...h]];for(let t=0;t<i.length;t++){const{index:e,length:n}=i[t];if(e<=h[0])c[0][2]+=n;else{if(!(e<h[1]))break;{const s=0===t?0:i[t-1].index,o=c[c.length-1];if(e===s)o[2]+=n;else{const t=o[1];o[1]=e,c.push([o[1],t,o[2]+n])}}}}const u=`<${e} class="${n} ${s}${t}">`,f=`</${e}>`,g=u.length,d=f.length;let x=0;for(let e=0;e<c.length;e++){const n=c[e];l(i,{index:n[0],length:g,isCloseTag:!1,annotationIndex:t},(t,e)=>t.index<=e.index?-1:1),l(i,{index:n[1],length:d,isCloseTag:!0,annotationIndex:t},(t,e)=>t.index-e.index),this.html=r(this.html,u,n[0]+n[2]+x),this.html=r(this.html,f,n[1]+n[2]+x+g),x+=g+d}return this.html}annotateAll(t,e){return t.forEach(t=>{this.annotate(t,e)}),this.html}unannotate(t){const e=[],n=this.tags.filter((n,s)=>(n.annotationIndex===t&&e.push(s),n.annotationIndex===t)),s=this.tags.filter(e=>e.annotationIndex!==t);for(let t=0;t<n.length;t++){const i=n[t];let o=0;for(let t=0;t<s.length;t++){const e=s[t];if(i.index<e.index)break;i.index>e.index?o+=e.length:void 0===e.annotationIndex?i.isCloseTag||(o+=e.length):i.annotationIndex<e.annotationIndex?e.isCloseTag&&(o+=e.length):i.isCloseTag||(o+=e.length)}this.html=this.html.slice(0,i.index+o)+this.html.slice(i.index+o+i.length),this.tags.splice(e[t]-t,1)}return this.html}unannotateAll(t){return t.forEach(t=>{this.unannotate(t)}),this.html}_stripHTMLTags(t){let e=t;const n=[];let s;const i=/<[^>]+>/;for(;s=e.match(i);)e=e.replace(s,""),n.push({index:s.index,length:s[0].length,isCloseTag:s[0].startsWith("</")});return{text:e,tags:n}}_insert(t,e,n){return t.slice(0,n)+e+t.slice(n)}_binaryInsert(t,e,n){if(0===t.length||n(t[0],e)>=0)return t.splice(0,0,e),t;if(t.length>0&&n(t[t.length-1],e)<=0)return t.splice(t.length,0,e),t;let s=0,i=t.length,o=0,r=i;for(;s<i;){const l=Math.floor((i+s)/2),a=n(t[l],e);if(a<0?s=l:a>0?i=l:(i=l,s=l),o===s&&r===i)break;o=s,r=i}return t.splice(i,0,e),t}}}]);