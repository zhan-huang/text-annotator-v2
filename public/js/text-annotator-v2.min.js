var TextAnnotator;(()=>{"use strict";var t={880:(t,n,e)=>{Object.defineProperty(n,"__esModule",{value:!0});var i=e(972);t.exports=i.default},972:function(t,n){var e=this&&this.__spreadArray||function(t,n,e){if(e||2===arguments.length)for(var i,o=0,r=n.length;o<r;o++)!i&&o in n||(i||(i=Array.prototype.slice.call(n,0,o)),i[o]=n[o]);return t.concat(i||Array.prototype.slice.call(n))};Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t){this.html="",this.text="",this.tags=[],this.annotations=[],this.html=t;var n=this._stripHTMLTags(t),e=n.text,i=n.tags;this.text=e,this.tags=i}return t.prototype.search=function(t,n){var e=void 0===n?{}:n,i=e.prefix,o=void 0===i?"":i,r=e.postfix,a=void 0===r?"":r,s=e.trim,l=void 0===s||s,h=e.caseSensitive,c=void 0!==h&&h,u=e.offset,f=void 0===u?0:u,g=this.text,d=this.annotations,p=o+t+a;p=l?p.trim():p,p=c?p:p.toLowerCase();var x=(c?g:g.toLowerCase()).indexOf(p,f),v=l?o.replace(/^\s+/,"").length:o.length,m=l?a.replace(/\s+$/,"").length:a.length;return-1===x?-1:d.push({index:x+v,length:p.substring(v,p.length-m).length})-1},t.prototype.searchAll=function(t,n){var e=0,i=[],o=-1,r=Object.assign({},n);do{-1!==(o=this.search(t,r))&&(e=this.annotations[o].index+1,r.offset=e,i.push(o))}while(-1!==o);return i},t.prototype.annotate=function(t,n){for(var i=void 0===n?{}:n,o=i.tagName,r=void 0===o?"span":o,a=i.baseClassName,s=void 0===a?"annotation":a,l=i.classPattern,h=void 0===l?"annotation-":l,c=this,u=c.tags,f=c.annotations,g=c._insert,d=c._binaryInsert,p=f[t],x=[p.index,p.index+p.length,0],v=[e([],x,!0)],m=0;m<u.length;m++){var y=u[m],T=y.index,_=y.length;if(T<=x[0])v[0][2]+=_;else{if(!(T<x[1]))break;var b=0===m?0:u[m-1].index,I=v[v.length-1];if(T===b)I[2]+=_;else{var C=I[1];I[1]=T,v.push([I[1],C,I[2]+_])}}}var A="<".concat(r,' class="').concat(s," ").concat(h).concat(t,'">'),M="</".concat(r,">"),L=A.length,O=M.length,j=0;for(m=0;m<v.length;m++){var k=v[m];d(u,{index:k[0],length:L,isCloseTag:!1,annotationIndex:t},(function(t,n){return t.index<=n.index?-1:1})),d(u,{index:k[1],length:O,isCloseTag:!0,annotationIndex:t},(function(t,n){return t.index-n.index})),this.html=g(this.html,A,k[0]+k[2]+j),this.html=g(this.html,M,k[1]+k[2]+j+L),j+=L+O}return this.html},t.prototype.annotateAll=function(t,n){var e=this;return t.forEach((function(t){e.annotate(t,n)})),this.html},t.prototype.unannotate=function(t){for(var n=[],e=this.tags.filter((function(e,i){return e.annotationIndex===t&&n.push(i),e.annotationIndex===t})),i=this.tags.filter((function(n){return n.annotationIndex!==t})),o=0;o<e.length;o++){for(var r=e[o],a=0,s=0;s<i.length;s++){var l=i[s];if(r.index<l.index)break;r.index>l.index?a+=l.length:void 0===l.annotationIndex?r.isCloseTag||(a+=l.length):r.annotationIndex<l.annotationIndex?l.isCloseTag&&(a+=l.length):r.isCloseTag||(a+=l.length)}this.html=this.html.slice(0,r.index+a)+this.html.slice(r.index+a+r.length),this.tags.splice(n[o]-o,1)}return this.html},t.prototype.unannotateAll=function(t){var n=this;return t.forEach((function(t){n.unannotate(t)})),this.html},t.prototype._stripHTMLTags=function(t){for(var n,e=t,i=[],o=/<[^>]+>/;n=e.match(o);)e=e.replace(n[0],""),i.push({index:n.index,length:n[0].length,isCloseTag:n[0].startsWith("</")});return{text:e,tags:i}},t.prototype._insert=function(t,n,e){return t.slice(0,e)+n+t.slice(e)},t.prototype._binaryInsert=function(t,n,e){if(0===t.length||e(t[0],n)>=0)return t.splice(0,0,n),t;if(t.length>0&&e(t[t.length-1],n)<=0)return t.splice(t.length,0,n),t;for(var i=0,o=t.length,r=0,a=o;i<o;){var s=Math.floor((o+i)/2),l=e(t[s],n);if(l<0?i=s:l>0?o=s:(o=s,i=s),r===i&&a===o)break;r=i,a=o}return t.splice(o,0,n),t},t}();n.default=i}},n={},e=function e(i){var o=n[i];if(void 0!==o)return o.exports;var r=n[i]={exports:{}};return t[i].call(r.exports,r,r.exports,e),r.exports}(880);TextAnnotator=e})();